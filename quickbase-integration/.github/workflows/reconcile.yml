name: Quickbase Reconciliation
on:
  schedule:
    - cron: '0 * * * *' # hourly
  workflow_dispatch:

jobs:
  reconcile:
    runs-on: ubuntu-latest
    steps:
      - name: Call reconciliation endpoint
        run: |
          curl -sS -X POST "https://$VERCEL_URL/api/reconcile" || true
        env:
          QB_USER_TOKEN: ${{ secrets.QB_USER_TOKEN }}
          QB_REALM: ${{ secrets.QB_REALM }}
          QB_TABLE_ID: ${{ secrets.QB_TABLE_ID }}
          VERCEL_URL: ${{ secrets.VERCEL_URL }}
